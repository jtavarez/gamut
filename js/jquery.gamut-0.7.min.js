(function(e){"use strict";e.fn.gamut=function(t){function n(e){e=e.toString();return parseFloat(e.replace(/[^\d.-]/g,""))}function r(e){var r=t.dataCallback.call(this,e);if(r===undefined){r=n(e.html())}else{r=n(r)}return r}var t=e.extend({},e.fn.gamut.defaults,t);return this.each(function(){function m(e){return(e-u)/(o-u)}function g(e){return e.replace(/^#/,"")}function y(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function b(e){var t=e.toString(16);return t.length==1?"0"+t:t}function w(e,t){if(e>1)e=1;else if(e<0)e=0;e*=100;var n=100/(t.length-1);var r=parseInt(e/n);if(r==t.length-1)r=r-1;var i=r+1;var s=i*n-r*n;var o,u,a;o=Math.abs(parseInt((t[r].r-t[i].r)*((e-r*n)/s)-t[r].r));u=Math.abs(parseInt((t[r].g-t[i].g)*((e-r*n)/s)-t[r].g));a=Math.abs(parseInt((t[r].b-t[i].b)*((e-r*n)/s)-t[r].b));return b(o)+b(u)+b(a)}var n=e(this);var i=n.find(t.item);var s=r(e(i[0]));var o,u;t.max?o=t.max:o=s;t.min?u=t.min:u=s;var a,f;var l=[];var c=[];var h,p;var d=[];if(t.colorArray){if(e.fn.gamut.gradients[t.colorArray]){a=e.fn.gamut.gradients[t.colorArray];f=e.fn.gamut.gradients[t.colorArray].length}else{a=t.colorArray;f=t.colorArray.length}if(f>1){for(var v=0;v<f;v++){l.push(y(a[v]))}}}if(t.textColorArray){if(e.fn.gamut.gradients[t.textColorArray]){h=e.fn.gamut.gradients[t.textColorArray];p=e.fn.gamut.gradients[t.textColorArray].length}else{h=t.textColorArray;p=t.textColorArray.length}if(p>1){for(var v=0;v<p;v++){c.push(y(h[v]))}}}i=i.filter(function(t){var n=e(this);var i=r(n);if(isNaN(i)){return 0}else{if(i<u){u=i}else if(i>o){o=i}d.push(i);return 1}});if(u>=o){o=u+1}n.css("display","none");i.each(function(n){var r=e(this);var i=d[n];if(t.colorArray){var s=w(m(i),l);r.css("background-color","#"+s)}if(t.textColorArray){var s=w(m(i),c);r.css("color","#"+s)}});n.css("display","")})};e.fn.gamut.gradients={red:["#000000","fff000","#ff0000"],ice:["000000","0059c7","5ca9eb"]};e.fn.gamut.defaults={item:"> *",dataCallback:function(e){},min:null,max:null,textColorArray:null,colorArray:null}})(jQuery)